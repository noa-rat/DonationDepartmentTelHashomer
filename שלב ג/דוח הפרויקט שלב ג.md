# DonationDepartmentTelHshomer
## תוכן עניינים
1. [תרשימים](#תרשימים)
2. [החלטות האינטגרציה](#החלטות_האינטגרציה)
3. [תהליך האינטגרציה](#תהליך_האינטגרציה)
4. [מבטים ושאילתות](#מבטים_ושאילתות)

## תרשימים
**תרשים ה-DSD של מחלקת יולדות:**
![DSD](https://raw.githubusercontent.com/noa-rat/DonationDepartmentTelHashomer/main/שלב%20ג/DSD.png)

**תרשים ה-ERD של מחלקת יולדות:**
![ERDMother](https://raw.githubusercontent.com/noa-rat/DonationDepartmentTelHashomer/main/שלב%20ג/ERDMother.png)

**תרשים ה-ERD המשותף:**
![ERD](https://raw.githubusercontent.com/noa-rat/DonationDepartmentTelHashomer/main/שלב%20ג/ERD.png)

## החלטות האינטגרציה
תחילה יצירנו ישות חדשה בשם person שמכילה את כל המידע הכללי על אנשים בעולם

הוספנו 2 ישויות חדשות שיורשות מ-person, האחת היא staffMember שמייצגת כלל אנשי הצוות שעובדים בבית החולים, והשניה היא patient שמייצגת את כלל המטופלים בבית החולים. בנוסף הפכנו את donor לישות יורשת מ-person.

הפכנו את doctor ו-nurse לישויות יורשות מ-staffMember. את הישות staffMember המקורית שלנו שינינו ל-fundraiser והפכנו גם אותה לישות יורשת מהישות staffMember החדשה.

כמו כן, הפכנו את mother ו-baby לישויות יורשות מ-patient.
בבסיס נתונים המקורי של מחלקת יולדות, היה מפתח זר של doctor_id שהיה אחד מהתכונות של mother. הפכנו את המפתח הזר הזה להיות תכונה של הישות patient, כלומר לכלל המטופלים יש רופא מטפל, כולל baby.
בבסיס נתונים המקורי של מחלקת יולדות, היה מפתח זר של room_number שהיה אחד מהתכונות של mother. הפכנו את המפתח הזר הזה להיות תכונה של הישות patient, כלומר לכלל המטופלים יש חדר לשהות בו. 

הוספנו מפתח זר של d_name (של הישות מחלקה) ל-staffMember כדי שנוכל לדעת באיזה מחלקה כל איש צוות עובד (כמובן בחרנו להגדיר את המחלקה של כל fundraiser להיות Donations Department).
וכן הוספנו מפתח זר של d_name (של הישות מחלקה) ל-room כדי שנוכל לדעת באיזה מחלקה נמצא כל חדר, והפכנו את room להיות ישות חלשה של department כי לא יתכן חדר שלא נמצא באחת המחלקות.

הוספנו תכונה אופציונלית לישות towards (הישות שמקשר בין donation ו-department, כלומר לאילו מחלקות מיועדת התרומה) של המפתח של room שהוא (room_number, d_name) שיורה האם התרומה מיועדת לחדר מסוים (לבנייתו או לשיפוצו).

## תהליך האינטגרציה
פה צריך לכתוב את התיאור של יצירת בסיס הנתונים המשותף בפועל, כלומר להסביר את קובץ הפקודות שהרצנו. לדעתי לא צריך לרדת מידי לפרטים אלא להסביר יחסית בגדול.

## מבטים ושאילתות
**תיאור ה-view מצד מחלקת התרומות:** ה-view מכיל את רוב המידע עבור כל תרומה: נתוני התרומה, התורם, המתרים, יעד התרומה ועוד.

**שליפת נתונים מה-view:**
![view1](https://raw.githubusercontent.com/noa-rat/DonationDepartmentTelHashomer/main/שלב%20ג/view1.png)
**שאילתא 1:**
תיאור: השאילתא מחזירה את סכום התרומות של כל תורם.
![view1select1](https://raw.githubusercontent.com/noa-rat/DonationDepartmentTelHashomer/main/שלב%20ג/view1select1.png)
**שאילתא 2:**
תיאור: השאילתא מחזירה את מספר המשתתפים בכל אירוע התרמה.
![view1select2](https://raw.githubusercontent.com/noa-rat/DonationDepartmentTelHashomer/main/שלב%20ג/view1select2.png)
**תיאור ה-view מצד מחלקת היולדות:** ה-view מכיל את המידע הבסיסי עבור כלל ה-persons שממחלקת היולדות, סוג ה-person ומפתחות זרים.

**שליפת נתונים מה-view:**
![view2](https://raw.githubusercontent.com/noa-rat/DonationDepartmentTelHashomer/main/שלב%20ג/view2.png)
**שאילתא 1:**
תיאור: השאילתא מחזירה את כל התינוקות של כל יולדת.
![view2select1](https://raw.githubusercontent.com/noa-rat/DonationDepartmentTelHashomer/main/שלב%20ג/view2select1.png)
**שאילתא 2:**
תיאור: השאילתא מחזירה את כל היולדות המטופלות ע"י כל רופא.
![view2select2](https://raw.githubusercontent.com/noa-rat/DonationDepartmentTelHashomer/main/שלב%20ג/view2select2.png)
